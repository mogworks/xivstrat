---
import type { Time } from '@/lib/utils'

import Span from '@/components/Span.vue'
import MechanicSection from '@/components/section/MechanicSection.astro'
import SolutionSection from '@/components/section/SolutionSection.astro'

import Stoneringer2Cast from '../_components/Stoneringer2Cast.astro'
import { translations } from '../_translations'

import img from '@/assets/07/m7s/Tmp.png'
import pos1_img from '@/assets/07/m7s/stoneringer2/p3_strange_seeds_1.png'
import pos2_img from '@/assets/07/m7s/stoneringer2/p3_strange_seeds_2.png'
import circle_img from '@/assets/07/m7s/stoneringer2/p3_seeds_circle.png'
import ring_img from '@/assets/07/m7s/stoneringer2/p3_seeds_ring.png'
import ListDot from '@/components/ListDot.astro'
import ImgRow from '@/components/typography/ImgRow.astro'
import Skill from '@/components/typography/Skill.astro'
import T from '@/components/typography/T.astro'

import BruteAbombinator from '../_components/BruteAbombinator.astro'
import BrutishSwingCast from '../_components/BrutishSwingCast.astro'
import LashingLariatCast from '../_components/LashingLariatCast.astro'

import SlaminatorCast from '../_components/SlaminatorCast.astro'
import BrutishSwingMoveActivate from '../_components/BrutishSwingMoveActivate.astro'
import BrutishSwingActivate from '../_components/BrutishSwingActivate.astro'
import StrangeSeedsCast from '../_components/StrangeSeedsCast.astro'
import RoleIcon from '@/components/RoleIcon.astro'
import NoteSection from '@/components/section/NoteSection.astro'
import MoveToCenterEvent from '../_components/MoveToCenterEvent.astro'

interface Props {
  time: Time
  base: Time
}

const { time, base = 0 }: Props = Astro.props
const lashingLariat = translations.lashingLariat
const stoneringer2Stoneringers = translations.stoneringer2Stoneringers
const slaminator = translations.slaminator
---

<Stoneringer2Cast start={time} base={base} />
<MoveToCenterEvent time="06:31.100" base={base} />
<StrangeSeedsCast start="09:34.096" base={base} />
<BrutishSwingCast start="09:44.261" base={base} />
<BrutishSwingMoveActivate time="09:49.923" base={base} />
<BrutishSwingActivate time="09:50.949" base={base} />
<LashingLariatCast start="09:52.017" base={base} />
<SlaminatorCast start="10:06.990" base={base} />

<MechanicSection title=`第二次 ${stoneringer2Stoneringers}`>
  <div class="flex flex-col gap-4">
    <div class="paragraph">
      <BruteAbombinator />
      掏出两把武器并进行下列组合技：
    </div>
    <div class="paragraph">
      <ListDot />
      点名四人
      <RoleIcon role="tank|healer" />
      组或
      <RoleIcon role="dps" />
      组准备放置第一次
      <Span variant="cyan">冰花</Span>
    </div>
    <div class="paragraph">
      <ListDot />
      一把武器
      <Span variant="pink">发光</Span>
      ，同时Boss连线一面墙
    </div>
    <div class="paragraph">
      <ListDot />
      点名判定
    </div>
    <div class="paragraph">
      <ListDot />
      <BruteAbombinator />
      跳至连线墙，随后
      <Span variant="cyan">冰花</Span>
      与
      <Span variant="yellow">钢铁/月环</Span>
      同时判定
    </div>
    <div class="paragraph">
      <ListDot />
      释放宽于半场的
      <Skill name={lashingLariat} />
      ，同时点名不同的四人
      <RoleIcon role="dps" />
      组或
      <RoleIcon role="tank|healer" />
      组准备放置第二次
      <Span variant="cyan">冰花</Span>
    </div>
    <div class="paragraph">
      <ListDot />
      点名判定，同时另一把武器
      <Span variant="pink">发光</Span>
      且Boss连线一面墙
    </div>
    <div class="paragraph">
      <ListDot />
      <BruteAbombinator />
      跳至连线墙，判定第二次
      <Span variant="cyan">冰花</Span>
      与另一种
      <Span variant="yellow">钢铁/月环</Span>
    </div>
    <div class="paragraph">
      <ListDot />
      <Skill name={slaminator} />
      在场中生成塔
    </div>
  </div>
</MechanicSection>
<SolutionSection title="解法：Game8">
  <div class="flex flex-col gap-4">
    <div class="paragraph">
      放置
      <Span variant="cyan">冰花</Span>
      时，可以把靠近Boss的位置留给近战职业
    </div>
    <div class="paragraph">
      最后的塔可以由
      <RoleIcon role="tank" />
      开无敌单独踩塔
    </div>
    <T class="mt-8" variant="lime" text=`冰花放置参考` />
    <ImgRow
      wrapperClass="max-w-100"
      borderVariant="fuchsia"
      imgs={[
        {
          src: pos1_img,
          alt: 'm7sp3: 结尾冰花',
          title: '第一次位置',
        },
        {
          src: pos2_img,
          alt: 'm7sp3: 结尾冰花',
          title: '第二次位置',
        },
      ]}
    />
    <T class="mt-8" variant="lime" text=`冰花组合技` />
    <ImgRow
      wrapperClass="max-w-100"
      borderVariant="fuchsia"
      imgs={[
        {
          src: circle_img,
          alt: 'm7sp3: 结尾冰花',
          title: '冰花与钢铁',
        },
        {
          src: ring_img,
          alt: 'm7sp3: 结尾冰花',
          title: '冰花与月环',
        },
      ]}
    />
  </div>
</SolutionSection>
