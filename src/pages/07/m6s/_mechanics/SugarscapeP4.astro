---
import { timeToSeconds, type Time } from '@/lib/utils'

import { Image } from 'astro:assets'

import Span from '@/components/Span.vue'
import FireResistanceUp from '@/components/buff/FireResistanceUp.astro'
import LightningResistanceDownII from '@/components/buff/LightningResistanceDownII.astro'
import MechanicSection from '@/components/section/MechanicSection.astro'

import SugarscapeCast from '../_components/SugarscapeCast.astro'
import SugarRiot from '../_components/SugarRiot.astro'
import AttackSection from '../_components/SugarRiotAttackSection.astro'

import paint_4 from '@/assets/07/m6s/paint/4.png'
import floor_p4_1 from '@/assets/07/m6s/floor_p4_1.png'
import { translations } from '../_translations'

interface Props {
  base: Time
}

const { base = 0 }: Props = Astro.props

const start = '07:08.579'
const duration = 7.7
const adjustedDuration = duration + 0.3
const end = timeToSeconds(start) + adjustedDuration

const Sugarscape = translations.Sugarscape
---

<SugarscapeCast start={start} end={end} base={base}>，场地变换为绿地 + 溪流 + 桥</SugarscapeCast>
<MechanicSection>
  <div class="flex flex-col gap-4">
    <h4 class="text-2xl">
      <Span variant="yellow">{Sugarscape}</Span>
    </h4>
    <div class="paragraph">
      <SugarRiot />
      连线场外北侧画卷，绘制如下图案
    </div>
    <Image src={paint_4} alt="Sugarscape Paint P4" class="w-96 border-2 border-fuchsia-400 dark:border-fuchsia-100" />
    <div class="paragraph mt-8">
      <SugarRiot />
      读条结束后，画卷具现化，场地变换为绿地 + 溪流 + 桥，如下图
    </div>
    <Image src={floor_p4_1} alt="P4 Floor：1" class="w-96 border-2 border-fuchsia-400 dark:border-fuchsia-100" />
    <div class="paragraph">该场地为少有的高低差地形，绿地可连接溪流和桥，在溪流中无法直接走到桥上（但可以跳上去）</div>
    <div class="paragraph">
      站在溪流中会被赋予
      <LightningResistanceDownII hover />
      和
      <FireResistanceUp hover />
    </div>
  </div>
</MechanicSection>
<AttackSection time="07:17.626" base={base} damage="57000" damageType="magical" />
<AttackSection time="07:20.658" base={base} damage="57000" damageType="magical" />
